---
title: "[CS] 무중단 배포란"
date: 2025-06-10
categories: [CS]
tags: [TIL, CS, deployment]
---

# # 무중단 배포(Zero-Downtime Deployment)란?

- 서비스에 다운 타임이 발생하지 않으면서, 새로운 버전의 애플리케이션을 서버에 배포하는 것을 말한다.
- 새로운 버전을 배포하는 과정에서 다운타임 시간을 없애 사용자가 가지는 불편함을 최소화하는 것이 목표이다.

<br /><br />

## # 무중단 배포 방식

### 1. 롤링 배포(Rolling Deployment)

![img](/assets/img/til/cs/deployment_rolling.png)

- 서버를 한 대씩 순차적으로 업데이트하는 가장 기본적인 방식이다.
- 특정 시점에는 두 가지 버전이 공존하기 때문에 새로운 버전은 기존 버전 기능을 지원하는 등 하위 호환성(Backward Compatibility)을 고려해야 한다.
  
- **장점** : 
  - 롤링 배포는 새로운 버전을 배포하기 위해서 새로운 서버를 생성하지 않는다.
  - 관리가 용이하다.
- **단점** : 
  - 배포가 진행 중인 서버는 요청 처리가 불가하기 때문에 다른 서버에 전달되는 트래픽이 증가할 수 있다.
- **사용하기 적합한 경우** : 
  - 배포를 위해 새로운 서버를 생성하는 비용을 감수하기 어려운 경우
  - 서버 API 구간에서 버그가 생겼을 때 이것을 수정하고 개발 서버에서 충분히 테스트한 이후 상용에 올려보고 싶은 경우 → 서버 10대 중 1대만 버그를 수정해서 배포하고 디버그 레벨로 로깅을 하면서 수정한 버그가 해결됐는지 확인한다. 만약 실제 상용 서버에서도 문제가 없다면 1대씩 순차적으로 롤링 배포를 진행하면 된다.

<br />

###  2. 블루 그린 배포(Blue-Green Deployment)

![img](/assets/img/til/cs/deployment_blueGreen.png)

- 기존의 서버와 동일한 스펙과 사이즈의 서버를 미리 준비하고, 신규 버전을 배포한 이후에 기존 서버는 폐기하고 트래픽을 신규 버전의 서버로 이전 시키는 방식이다.
- `Blue`는 기존 버전, `Green`은 신규 버전을 의미한다.
  
- **장점** : 
  - 블루/그린 배포의 경우에는 기존의 버전을 가지고 있기(폐기 이전이라 가정) 때문에 롤백을 빠르게 수행할 수 있다.
  - 운영 환경에 영향을 미치지 않고 배포를 진행할 수 있다.
- **단점** : 배포 과정에서 새로운 서버를 미리 준비해야 한다는 점에서 비용이 발생할 수 있다.
- **사용하기 적합한 경우** : 
  - 대규모 업데이트가 있는 경우 → 예를 들어 전면적으로 기술 부채가 해결되거나 중요한 변화가 있을 때, 비용을 감수하고 블루/그린 배포를 채택하는 것이 유용할 수 있다.

<br />

### 3. 카나리 배포(Canary Deployment)

![img](/assets/img/til/cs/deployment_canary.png)

- 기존 버전의 서버와 새로운 버전의 서버들을 구성한 이후, 전체 트래픽의 퍼센티지로 관리하는 방식이다.
- 예를 들어 트래픽을 기존 서버 70퍼, 신규 서버 30퍼로 나누고 점점 신규 서버로 트래픽을 보내어 나중엔 신규 서버가 100퍼센트가 되어 배포가 완료된다. 롤링 배포처럼 특정 시점에 다른 두 버전의 서버가 공존하기 때문에 하위 호환성을 고려해야 한다.
- 블루그린 배포와 유사해보이지만 블루그린 배포는 트래픽을 한 번에 전환하는 반면, 카나리 배포는 트래픽을 점진적으로 전환한다.

- **장점** : 문제 상황을 감지할 수 있어 빠르게 롤백이 가능하다.
- **단점** : 네트워크 트래픽 제어에 부담이 될 수 있다.
- **사용하기 적합한 경우** : 
-  통계적으로 무언가 확인하고 싶은 것 (오류율, 성능)이 있는 경우
  - A/B 테스트를 하고 싶은 경우

<br /><br />

참고 : 
- [무중단 배포란 무엇인가요?](https://www.maeil-mail.kr/question/195)
- [[DevOps/Infra] 무중단 배포란?(Rolling, BlueGreen, Canary)](https://hoehen-flug.tistory.com/53)
- [무중단 배포(롤링 배포, 블루 그린 배포, 카나리 배포)](https://velog.io/@heksis/%EB%AC%B4%EC%A4%91%EB%8B%A8-%EB%B0%B0%ED%8F%AC%EB%9E%80)
