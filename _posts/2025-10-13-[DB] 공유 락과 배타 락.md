---
title: "[DB] 공유 락과 배타 락"
date: 2025-10-13
categories: [DB]
tags: [TIL, DB]
---

# # 공유 락과 배타 락이란?

DBMS에서 동시성 제어를 위해 사용되는 락에는 두 가지 주요 락(lock) 유형인 공유 락(Shared Lock)과 배타 락(Exclusive Lock)이 있다.

## 1. 공유 락 (Shared Lock)

공유 락은 읽기 락이라고 부르며, **여러 트랜잭션이 동시에 데이터를 읽을 수 있도록 허용하는 락**이다. 공유 락이 걸린 데이터는 다른 트랜잭션들이 읽기 작업을 수행할 수 있지만, 쓰기 작업은 불가능하다. 즉, 공유 락은 데이터의 일관성을 유지하면서도 다수의 트랜잭션이 데이터를 읽을 수 있도록 한다.


**예시:**
- 트랜잭션 A가 데이터 X에 공유 락을 걸고 읽기
- 트랜잭션 B가 데이터 X에 공유 락을 걸고 읽기
- 트랜잭션 C가 데이터 X에 배타 락을 걸고 쓰기 시도 → 실패 (대기 상태)

<br /><br />

## 2. 배타 락 (Exclusive Lock)

배타 락은 쓰기 락이라고 부르며, **한 트랜잭션이 데이터를 읽거나 쓸 때 다른 트랜잭션이 해당 데이터에 접근하지 못하도록 막는 락**이다. 배타 락이 걸린 데이터는 다른 트랜잭션이 읽기나 쓰기 작업을 수행할 수 없다. 이는 데이터의 무결성을 보장하기 위해 필요하다.


**예시:**
- 트랜잭션 A가 데이터 Y에 배타 락을 걸고 쓰기
- 트랜잭션 B가 데이터 Y에 공유 락을 걸고 읽기 시도 → 실패 (대기 상태)
- 트랜잭션 C가 데이터 Y에 배타 락을 걸고 쓰기 시도 → 실패 (대기 상태)

<br /><br />

### # 참고. 데드 락

데드 락(Deadlock)은 두 개 이상의 트랜잭션이 서로가 가진 락을 기다리면서 무한 대기 상태에 빠지는 상황을 말한다. 


**예시:**
- 트랜잭션 A가 데이터 X에 배타 락을 걸고 쓰기
- 트랜잭션 B가 데이터 Y에 배타 락을 걸고 쓰기
- 트랜잭션 A가 데이터 Y에 배타 락을 걸기 위해 대기
- 트랜잭션 B가 데이터 X에 배타 락을 걸기 위해 대기

→ 이 상황에서 트랜잭션 A와 B는 서로가 가진 락을 해제할 때까지 무한 대기 상태에 빠지게 된다. 데드 락을 방지하기 위해 DBMS는 타임아웃 설정, 트랜잭션 우선순위 지정 등의 기법을 사용할 수 있다.

<br /><br />


참고 : 
- [공유 락과 배타 락에 대해서 설명해주세요.](https://www.maeil-mail.kr/question/80)
