---
title: "[JAVA] JPA의 ddl-auto 옵션"
date: 2025-09-19
categories: [JAVA]
tags: [TIL, JAVA]
---

# # JPA의 ddl-auto 옵션

JPA(Java Persistence API)는 자바 애플리케이션에서 데이터베이스와 상호작용하기 위한 표준 인터페이스이다. JPA는 객체-관계 매핑(ORM)을 통해 자바 객체를 데이터베이스 테이블에 매핑하고, 이를 통해 데이터베이스 작업을 보다 쉽게 수행할 수 있도록 도와준다.

<br /><br />

## # ddl-auto 옵션

`ddl-auto` 옵션은 JPA 구현체(예: Hibernate)에서 데이터베이스 스키마를 자동으로 생성하거나 업데이트하는 방법을 지정하는 설정이다. 이 옵션은 `spring.jpa.hibernate.ddl-auto` 속성을 통해 설정할 수 있다.

<br />

### # 주요 옵션

1. `none` : 아무 작업도 수행하지 않는다. 기존 스키마를 유지한다. 데이터베이스 스키마를 수동으로 관리하고 싶을 때 유용하며, 프로덕션 환경에서 주로 사용된다.

2. `validate` : 엔티티와 데이터베이스 스키마가 일치하는지 검증하며, 스키마 변경은 따로 수행하지 않는다. 일치하지 않으면 예외를 발생시킨다.

3. `update` : 엔티티에 맞게 데이터베이스 스키마를 업데이트한다. 기존 데이터를 유지하면서, 새로운 엔티티나 변경된 엔티티 필드는 스키마에 반영된다.

4. `create` : 애플리케이션이 시작될 때마다 기존 스키마를 삭제하고 새로 생성한다. 기존 데이터는 모두 삭제된다.

5. `create-drop` : `create`와 유사하지만, 애플리케이션이 종료될 때 스키마를 삭제한다는 점에서 차이가 있다. 매 테스트 실행 시마다 깨끗한 데이터베이스 상태를 유지하고자 할 때 사용되기 때문에, 테스트 환경에서 주로 사용된다.

<br /><br />

### # 사용 예시

```properties
spring.jpa.hibernate.ddl-auto=update
```

<br /><br />

### # 주의사항

- `create`와 `create-drop` 옵션은 개발 및 테스트 환경에서만 사용하는 것이 좋다. 프로덕션 환경에서는 데이터 손실 위험이 있다.

- `update` 옵션은 편리하지만, 모든 스키마 변경 사항을 완벽하게 반영하지 못할 수 있다. 복잡한 스키마 변경이 필요한 경우에는 별도의 마이그레이션 도구(예: Flyway, Liquibase)를 사용하는 것이 좋다.

- `validate` 옵션은 프로덕션 환경에서 스키마 일관성을 유지하는 데 유용하다.

<br /><br />

참고 : 
- [JPA의 ddl-auto 옵션은 각각 어떤 동작을 하고 어떤 상황에서 사용해야 할까요?](https://www.maeil-mail.kr/question/28)