---
title: "[CS] Kafka 와 RabbitMQ"
date: 2025-11-10
categories: [CS]
tags: [TIL, CS]
---

# # Kafka 와 RabbitMQ

Kafka와 RabbitMQ는 스트림 처리에 사용할 수 있는 메시지 대기열 시스템이다.

둘의 차이점에 대해서 알아보기 전에 메시지 대기열 시스템에 대해 먼저 알아보자.

<br />

## # 메시지 대기열 시스템이란?

메시지 대기열 시스템(Message Queue System)은 비동기적으로 메시지를 주고받을 수 있도록 하는 소프트웨어 인프라이다. 이를 통해 애플리케이션 간의 통신을 효율적으로 관리하고, 시스템의 확장성과 안정성을 높일 수 있다.

![img](/assets/img/til/cs/mq.png)
<br />

#### 메시지 대기열 시스템의 구성 요소

1. **프로듀서(Producer)**: 메시지를 생성하고 대기열에 보내는 역할을 한다.

2. **메시지 큐(Message Queue)**: 프로듀서가 보낸 메시지를 저장하는 공간이다. 메시지는 큐에 쌓여 있다가 컨슈머가 가져갈 때까지 대기한다.

3. **컨슈머(Consumer)**: 메시지 큐에서 메시지를 가져와 처리하는 역할을 한다.

#### 메시지 대기열 시스템의 장점

- **비동기 처리**: 프로듀서와 컨슈머가 독립적으로 동작할 수 있어 시스템의 응답성을 높일 수 있다.

- **부하 분산**: 메시지 큐를 통해 작업을 분산 처리할 수 있어 시스템의 부하를 효과적으로 관리할 수 있다.

- **확장성**: 새로운 프로듀서나 컨슈머를 쉽게 추가할 수 있어 시스템의 확장성이 뛰어나다.

<br /><br />

## # Kafka 와 RabbitMQ의 차이점

Kafka와 RabbitMQ는 모두 메시지 대기열 시스템이지만, 설계 철학과 사용 사례에서 차이가 있다.

### 1. Kafka

kafka는 LinkedIn에서 개발된 메시지큐 방식 기반, 분산 메시징 시스템이다. 주로 로그 수집, 실시간 분석, 이벤트 소싱 등 대규모 데이터 처리에 적합하다.
<br />

#### 1-1. Kafka 의 동작 원리

![img](/assets/img/til/cs/kafka.png)

- `publisher`는 전달하고자 하는 메시지를 `topic`을 통해 카테고리화 한다.
- `subscriber`는 원하는 topic을 구독(=subscribe)함으로써 메시지를 읽어온다.
- `publisher`와 `subscriber`는 오로지 topic 정보만 알 뿐, 서로에 대해 알지 못한다.
- kafka는 `broker`들이 하나의 클러스터로 구성되어 동작하도록 설계한다.
- 클러스터 내, broker에 대한 분산처리는 `ZooKeeper`가 담당한다.

<br />

#### 1-2. Kafka 의 특징

- **높은 처리량**: 대용량의 메시지를 빠르게 처리할 수 있다.
- **내결함성**: 데이터 복제를 통해 장애 발생 시에도 데이터 손실을 최소화한다.
- **확장성**: 클러스터에 브로커를 추가하여 쉽게 확장할 수 있다.
- **메시지 영속성**: 디스크에 메시지를 저장하여 데이터 손실을 방지한다.

<br /><br />

### 2. RabbitMQ

RabbitMQ는 AMQP(Advanced Message Queuing Protocol)를 구현한 메시지 브로커이다. 주로 금융 거래, 주문 처리 등 신뢰성이 중요한 시스템에 적합하다.

<br />

#### 2-1. RabbitMQ 의 동작 원리

![img](/assets/img/til/cs/rabbitMQ.png)

- `producer`는 메시지를 생성하여 `exchange`로 보낸다.

- `exchange`는 메시지를 받아서 `binding` 규칙에 따라 적절한 `queue`로 라우팅한다.

- `consumer`는 `queue`에서 메시지를 가져와 처리한다.

<br />

#### 2-2. RabbitMQ 의 특징

- **신뢰성**: 메시지 전달 보장과 확인 메커니즘을 제공한다.
- **유연한 라우팅**: 다양한 라우팅 옵션을 통해 메시지를 적절한 큐로 전달할 수 있다.
- **플러그인 아키텍처**: 다양한 플러그인을 통해 기능을 확장할 수 있다.
- **관리 도구**: 웹 기반 관리 인터페이스를 제공하여 시스템 상태를 모니터링하고 관리할 수 있다.

<br /><br />

## # Kafka VS RabbitMQ

| 특징      | Kafka       | RabbitMQ         |
|-----------|-------------|------------------|
| 사용 사례  | 로그 수집, 실시간 분석 | 금융 거래, 주문 처리 |
| 처리량    | 매우 높음    | 보통             |
| 내결함성   | 높음        | 높음             |
| 확장성    | 매우 높음    | 높음             |
| 메시지 영속성 | 있음        | 있음             |
| 프로토콜   | 자체 프로토콜  | AMQP             |
| 라우팅 방식 | 토픽 기반    | 익스체인지 기반   |
| 관리 도구   | 제한적       | 웹 기반 관리 인터페이스 |


<br /><br />

참고 : 
- [Kafka와 RabbitMQ의 차이점은 무엇인가요?](https://aws.amazon.com/ko/compare/the-difference-between-rabbitmq-and-kafka/)
- [카프카(kafka) vs RabbitMQ](https://velog.io/@cho876/%EC%B9%B4%ED%94%84%EC%B9%B4kafka-vs-RabbitMQ)