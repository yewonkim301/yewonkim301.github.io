---
title: "[CS] SQL 인젝션"
date: 2025-08-11
categories: [CS]
tags: [TIL, CS, SQL]
---

# # SQL 인젝션이란?
SQL 인젝션(SQL Injection)은 공격자가 악의적인 SQL 코드를 입력하여 데이터베이스에 대한 비정상적인 접근을 시도하는 **보안 취약점** 이다. 이 공격은 주로 웹 애플리케이션에서 발생하며, 사용자가 입력한 데이터를 적절히 검증하지 않거나 필터링하지 않을 때 발생한다.

<br /><br />

# ## SQL 인젝션의 예시
예를 들어, 사용자가 로그인 폼에 다음과 같은 입력을 할 수 있다
```sql
username: admin' OR '1'='1
password: anything
```

이 입력은 SQL 쿼리를 다음과 같이 변조할 수 있습니다:
```sql
SELECT * FROM users WHERE username = 'admin' OR '1'='1' AND password = 'anything';
```

이 쿼리는 항상 참이 되므로, 공격자는 인증 없이 관리자 권한으로 로그인할 수 있게 된다.

<br /><br />

# ## SQL 인젝션을 방지하는 방법

1. **Prepared Statements (준비된 문장)** : SQL 쿼리를 실행하기 전에 미리 정의된 템플릿을 사용하여 사용자 입력을 안전하게 처리한다. 이는 SQL 인젝션 공격을 방지하는 가장 효과적인 방법 중 하나이다.

```
String sql = "SELECT * FROM users WHERE username = ? AND password = ?";
PreparedStatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1, username);
pstmt.setString(2, password);
```

2. **입력 검증** : 사용자 입력을 검증하여 예상치 못한 데이터가 들어오지 않도록 한다. 예를 들어, 입력값이 특정 형식이나 범위 내에 있는지 확인한다.

3. **사용자 입력 이스케이프** : 사용자 입력을 SQL 쿼리에서 안전하게 사용하기 위해 특수 문자를 이스케이프 처리한다. 이는 SQL 쿼리가 의도하지 않은 방식으로 실행되는 것을 방지한다.

4. **최소 권한 원칙** : 데이터베이스 사용자에게 필요한 최소한의 권한만 부여한다. 이를 통해 공격자가 데이터베이스에 접근하더라도 피해를 최소화할 수 있다.

5. **ORM 프레임워크 사용** : JPA, Hibernate와 같은 ORM 프레임워크를 사용하여 SQL 쿼리를 자동으로 생성하고, 사용자 입력을 안전하게 처리할 수 있다. 이는 SQL 인젝션 공격을 예방하는 데 유용하다.

6. **정기적인 보안 점검** : 애플리케이션과 데이터베이스의 보안을 정기적으로 점검하고, 취약점을 발견하면 즉시 수정한다.

<br /><br />

참고 : 
- [SQL 인젝션란 무엇인가요?](https://www.maeil-mail.kr/question/283)
